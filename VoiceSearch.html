<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ESoSearch</title>

    <link rel="stylesheet" type="text/css" media="screen and (max-width: 768px)" href="portrait.css">
    <link rel="stylesheet" type="text/css" media="screen and (min-width: 769px)" href="desktop.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <script type="text/javascript" src="./src/ESoSearch.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
<!--<p>test 12 3</p>-->

<div class="wrapper">
    <form id="search-bar">
        <label id="did-you-say">Is this what you said?</label>
        <textarea  id="voice-query" name="voice-query" placeholder="Say something like Yoga, Chess, or ..."></textarea>
        <div class="wrapper-voice">


            <i class="fa fa-microphone" id="mic"></i>

        </div>
        <div class="wrapper-voice"><label id="voice-status">Tap to Speak</label></div>
    </form>
</div>
</body>
</html>

<script>

    var micStatus = 0;
    $("#did-you-say").hide();
    $("#mic").hover(function() {
        document.body.style.cursor = "pointer";
    });
    $("#mic").mouseleave(function() {
        document.body.style.cursor = "auto";
    });
    $("#mic").click(function() {
        if(micStatus == 0){//mic should turn on
        //This is where the voice plugin should start listening...
            $("#voice-status").html("Listening ...<br>Tap to stop");
            $("#voice-status").css("color", "DarkCyan");
            $("#mic").css("color", "DarkCyan");
            $("#did-you-say").hide();

            micStatus = 1;
        }
        else {
            $("#voice-status").html("Tap to Speak");
            $("#voice-status").css("color", "white");
            $("#mic").css("color", "white");
            $("#did-you-say").show();
            $("#voice-query").html('Chess Club');//--------------------> replace with actual query <--------------------
            $('<button type="button" class="btn btn-secondary" name="no" id="rejection-but">No</button>').insertAfter("#voice-query");
            $('<button type="button" class="btn btn-primary" name="yes" id="acceptance-but">Yes</button>').insertAfter("#rejection-but");

            micStatus = 0;

            $("#rejection-but").click(function() {
                console.log("kmjhgvf");
                $("#voice-status").html("Tap to Speak");
                $("#voice-status").css("color", "#696969");
                $("#mic").css("color", "#696969");
                micStatus = 0;
                $("#did-you-say").hide();
                $("#voice-query").html("");
                removeButtons();
            });
            $("#acceptance-but").click(function(){
                $("#did-you-say").hide();
                window.location.href = "./Results.html";
            });
        }
    });



    function removeButtons() {
        $("#rejection-but").remove();
        $("#acceptance-but").remove();
        $("#voice-query").html('');
    }


</script>